package model;

import java.beans.XMLDecoder;
import java.beans.XMLEncoder;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.InputStream;
import java.io.ObjectInputStream;


public class XMLSerializer {

	public String serializeWithXML(User user) {
		
		XMLEncoder encoder;
		
			/*Properties prop=new Properties();
			prop.load(new FileInputStream("resources"+File.separator+"config.properties"));
			File f=new File(prop.getProperty("XMLfileLocation")++File.user.getUsername());
			if(!f.exists()) {
				f.createNewFile();
			}
			else {
				f.delete();
				f.createNewFile();
			}*/
			ByteArrayOutputStream bos=new ByteArrayOutputStream();
			encoder = new XMLEncoder(bos);
			encoder.writeObject(user);
			encoder.close();
			return new String(bos.toByteArray());
			
	}
public User deserializeWithXML(String XMLuser) {
		
		XMLDecoder  decoder;
		
			/*Properties prop=new Properties();
			prop.load(new FileInputStream("resources"+File.separator+"config.properties"));
			File f=new File(prop.getProperty("XMLfileLocation")++File.user.getUsername());
			if(!f.exists()) {
				f.createNewFile();
			}
			else {
				f.delete();
				f.createNewFile();
			}*/
			ObjectInputStream ois=null;
			
			decoder = new XMLDecoder(new ByteArrayInputStream(XMLuser.getBytes()));
			User user=(User) decoder.readObject();
			decoder.close();
			return user;
			
	}
	
}
